{"version":3,"sources":["../../src/providers/window/window.ts","../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/pages/register/register.ts","../../src/validators/contact.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/pages/home/home.ts","../../src/pages/login/login.ts","../../src/providers/auth/auth.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class WindowProvider {\n\n  constructor() {\n    \n  }\n\n  get windowRef() {\n    return window;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/window/window.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 113;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 113\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 155;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 155\n// module chunks = 0","import { Component,OnInit } from '@angular/core';\nimport { Loading, NavController, LoadingController, AlertController } from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\nimport { AuthProvider } from '../../providers/auth/auth';\nimport { WindowProvider } from '../../providers/window/window';\n\nimport { ContactValidator } from '../../validators/contact';\n\nimport firebase from 'firebase/app';\n\n@Component({\n  selector: 'page-register',\n  templateUrl: 'register.html',\n})\nexport class RegisterPage  implements OnInit{\n  \n  loading: Loading;\n  loginForm: FormGroup;\n\n  windowRef: any;\n\n  user: any;\n  verificationCode: string;\n  f: boolean=false;\n\n  private appVerifier: firebase.auth.RecaptchaVerifier;\n  \n  \n  constructor(private authProvider: AuthProvider,\n  private win: WindowProvider,\n  private formBuilder: FormBuilder,\n  public navCtrl: NavController,\n  private alertCtrl: AlertController, \n  private loadingCtrl: LoadingController\n  ) {\n    this.loginForm = formBuilder.group({\n      contact: ['', Validators.compose([Validators.required, ContactValidator.isValid])]\n    });\n  }\n\n  ngOnInit() {\n    this.f=false;\n    this.windowRef = this.win.windowRef;\n    this.windowRef.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', \n    {\n      'size': 'normal',\n      'callback': response => {\n        // reCAPTCHA solved, allow signInWithPhoneNumber.\n        this.f=true;\n      },\n      'expired-callback': function() {\n        // Response expired. Ask user to solve reCAPTCHA again.\n        // ...\n      }\n    });\n\n    this.windowRef.recaptchaVerifier.render();\n  }  \n\n  sendLoginCode() {    \n    firebase.auth().signInWithPhoneNumber('+91'+this.loginForm.value.contact, this.windowRef.recaptchaVerifier)\n    .then(result => {\n      this.windowRef.confirmationResult = result;\n    })\n    .catch( error => console.log('Auth failed\\n', error.message) );\n  }\n\n  verifyLoginCode() {\n    this.windowRef.confirmationResult.confirm(this.verificationCode)\n    .then( result => {\n      this.user = result.user;\n    })\n    .catch( error => console.log(error, \"Incorrect code entered?\"));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/register.ts","import { FormControl } from '@angular/forms';\n\nexport class ContactValidator {\n\n  static isValid(control: FormControl){\n    const re = /^(?:\\d{10})$/.test(control.value);\n\n    if(!re){\n      return { \"contact\": true  };\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/validators/contact.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\n\nimport { MyApp } from './app.component';\n\nimport { HomePage } from '../pages/home/home';\nimport { LoginPage } from '../pages/login/login';\nimport { RegisterPage } from '../pages/register/register';\n\n//Firebase\nimport { AngularFireModule } from 'angularfire2';\nimport { AngularFireAuthModule } from 'angularfire2/auth';\n//import { AngularFirestoreModule } from 'angularfire2/firestore';\n\nimport { AuthProvider } from '../providers/auth/auth';\nimport { WindowProvider } from '../providers/window/window';\n\n// Initialize Firebase\nconst config = {\n  apiKey: \"AIzaSyC_KeK56MdvteYU96PocSxfAaOgO9aVBSI\",\n  authDomain: \"mymess-11f8c.firebaseapp.com\",\n  databaseURL: \"https://mymess-11f8c.firebaseio.com\",\n  projectId: \"mymess-11f8c\",\n  storageBucket: \"mymess-11f8c.appspot.com\",\n  messagingSenderId: \"201921251715\"\n};\n\n@NgModule({\n  declarations: [\n    MyApp,\n    HomePage,\n    LoginPage,\n    RegisterPage\n  ],\n  imports: [\n    BrowserModule,\n    IonicModule.forRoot(MyApp),\n    AngularFireAuthModule,\n    AngularFireModule.initializeApp(config)\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    HomePage,\n    LoginPage,\n    RegisterPage\n  ],\n  providers: [\n    { provide: ErrorHandler, useClass: IonicErrorHandler },\n    AuthProvider,\n    WindowProvider\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\n\nimport { HomePage } from '../pages/home/home';\nimport { LoginPage } from '../pages/login/login';\nimport { RegisterPage } from '../pages/register/register';\n\nimport { AuthProvider } from '../providers/auth/auth';\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage:any = RegisterPage;\n\n  constructor(authProvider:AuthProvider) {\n    // this.authProvider.getAuthState().subscribe((user) => {\n    //   if(user){\n    //     console.log('LoggedIn', user);\n    //   }\n    //   else{\n    //     console.log('LoggedOut');\n    //   }\n    // }); \n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { Component } from '@angular/core';\nimport { NavController } from 'ionic-angular';\n\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n\n  constructor(public navCtrl: NavController) {\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { Component, OnInit } from '@angular/core';\nimport { Loading, NavController, LoadingController, AlertController } from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\nimport { AuthProvider } from '../../providers/auth/auth';\nimport { WindowProvider } from '../../providers/window/window';\n\nimport { ContactValidator } from '../../validators/contact';\n\nimport firebase from 'firebase/app';\n\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage implements OnInit {\n  \n  loading: Loading;\n  \n  loginForm: FormGroup;\n  resetForm: FormGroup;\n\n  windowRef: any;\n  user: any;\n\n  flag: boolean=false;\n  \n  constructor(private authProvider: AuthProvider,\n  private win: WindowProvider,\n  private formBuilder: FormBuilder,\n  public navCtrl: NavController,\n  private alertCtrl: AlertController, \n  private loadingCtrl: LoadingController\n  ) {\n    this.loginForm = formBuilder.group({\n      contact: ['', Validators.compose([Validators.required, ContactValidator.isValid])],\n    });\n    this.resetForm = formBuilder.group({\n      code: ['', Validators.compose([Validators.required, Validators.minLength(6), Validators.maxLength(6)])],\n    });\n  }\n\n  ngOnInit() {\n    this.flag=false;\n    this.windowRef = this.win.windowRef;\n    this.windowRef.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {\n      'size': 'normal',\n      'callback': response => {\n        // reCAPTCHA solved, allow signInWithPhoneNumber.\n        this.flag=true;\n      }\n    });\n\n    this.windowRef.recaptchaVerifier.render().then( widgetId => {\n      this.flag=false;\n      this.windowRef.recaptchaVerifier.reset(widgetId);\n    });\n  }\n\n  sendLoginCode() {\n    firebase.auth().signInWithPhoneNumber('+91'+this.loginForm.value.contact, this.windowRef.recaptchaVerifier).then(result => {\n      this.windowRef.confirmationResult = result;\n\n    })\n    .catch( error => console.log(\"Authentication Error: \", error.message) );\n  }\n\n  verifyLoginCode() {\n    this.windowRef.confirmationResult.confirm(this.resetForm.value.code).then( result => {\n      this.user = result.user;\n    })\n    .catch( error => console.log(error, \"Incorrect code entered?\"));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\n\nimport firebase from 'firebase/app';\nimport { AngularFireAuth } from 'angularfire2/auth';\n\n@Injectable()\nexport class AuthProvider {\n\n  private authState: Observable<firebase.User>\n  private currentUser: firebase.User = null;\n\n  constructor(private afAuth: AngularFireAuth) {\n    \n    this.authState = this.afAuth.authState;\n    \n    this.authState.subscribe(user => {\n      if(user) {\n        this.currentUser = user;\n        console.log('Authprovider executed!', this.currentUser);\n      } else {\n        this.currentUser = null;\n      }\n    });\n  }\n\n  getAuthState() {\n    return this.authState;\n  }\n\n  getUser(){\n    return this.currentUser;\n  }\n\n  loginUser(email: string, password: string): Promise<any> {\n    return this.afAuth.auth.signInWithEmailAndPassword(email, password);\n  }\n\n  resetPassword(email: string): Promise<void> {\n    return this.afAuth.auth.sendPasswordResetEmail(email);\n  }\n\n  logoutUser(): Promise<void> {\n    return this.afAuth.auth.signOut();\n  }\n\n  registerUser(email: string, password: string): Promise<any> {\n    return this.afAuth.auth.createUserWithEmailAndPassword(email, password);\n  }\n\n  sendVerfication(): Promise<void>{\n    return this.currentUser.sendEmailVerification();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/auth/auth.ts"],"sourceRoot":""}